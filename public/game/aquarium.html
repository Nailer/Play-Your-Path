		
	
		<div id="aquarium">
		
			<div id="floor">
			
				<div id="player">
					<div id="sprite"></div>
					<div id="shadow"></div>
				</div>
 
				<div id="fish"></div>
 
				<div id="gate_left" class="transparent"></div>
				<div id="gate_right" class="transparent"></div>
				
				<div id="rock_1" class="transparent"></div>
				<div id="rock_2" class="transparent"></div>
				<div id="rock_3" class="transparent"></div>
				<div id="rock_4" class="transparent"></div>
				<div id="rock_4_mask" class="transparent"></div>
				<div id="rock_5" class="transparent"></div>
			</div>
			
			<div id="key" data-tooltip="The key!" data-info="The golden key"></div>
			
			<div id="teleport">
				<div><div><div><div><div class="core"><!-- --></div></div></div></div></div>
			</div>

			<div id="exit" data-tooltip="Back to the room" ></div>

		</div>

		<!-- Oracle Fish Chat UI -->
		<div id="oracle" style="position:absolute; right:16px; top:16px; width: 360px; max-width: 90vw; z-index: 999;">
			<div style="background: rgba(0,0,0,0.6); color:#fff; border:1px solid rgba(255,255,255,0.15); border-radius:12px; overflow:hidden;">
				<div style="padding:12px 14px; border-bottom:1px solid rgba(255,255,255,0.1); display:flex; align-items:center; gap:10px;">
					<div style="width:28px; height:28px; background:#00c2ff; border-radius:50%; box-shadow:0 0 10px rgba(0,194,255,0.6);"></div>
					<div style="font-weight:600;">Oracle Fish</div>
				</div>
				<div id="oracle-messages" style="height:220px; overflow:auto; padding:12px; font-size:13px; line-height:1.4;">
					<div style="opacity:0.9;">Ask me about PYP, quests, or request a task. I am the juju oracle of the waters.</div>
				</div>
				<form id="oracle-form" style="display:flex; gap:8px; padding:10px; border-top:1px solid rgba(255,255,255,0.1);">
					<input id="oracle-input" type="text" placeholder="Ask the fish..." style="flex:1; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.1); color:#fff;" />
					<button type="submit" style="padding:10px 14px; border-radius:8px; border:0; background:#00c2ff; color:#001018; font-weight:600; cursor:pointer;">Ask</button>
				</form>
			</div>
		</div>

		<script>
		(function(){
			var apiBase = (window.PYP && window.PYP.OLLAMA_URL) || 'http://localhost:11434';
			var model = (window.PYP && window.PYP.OLLAMA_MODEL) || 'deepseek-r1:1.5b';
			var messagesEl = document.getElementById('oracle-messages');
			var formEl = document.getElementById('oracle-form');
			var inputEl = document.getElementById('oracle-input');

			function append(role, text){
				var div = document.createElement('div');
				div.style.margin = '6px 0';
				div.innerHTML = '<strong>' + (role === 'user' ? 'You' : 'Fish') + ':</strong> ' + text.replace(/</g,'&lt;');
				messagesEl.appendChild(div);
				messagesEl.scrollTop = messagesEl.scrollHeight;
			}

			async function askOracle(question){
				append('user', question);
				append('assistant', '...');
				try{
					var res = await fetch(apiBase + '/api/generate', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({
							model: model,
							stream: false,
							prompt: 'You are the Oracle Fish of Play Your Path. Answer briefly and suggest a concrete task players can do in the world. Question: ' + question
						})
					});
					var data = await res.json();
					var last = messagesEl.lastElementChild;
					last.innerHTML = '<strong>Fish:</strong> ' + (data && data.response ? data.response : 'Hmm... the waters are quiet.');
				}catch(e){
					var last = messagesEl.lastElementChild;
					last.innerHTML = '<strong>Fish:</strong> Unable to reach oracle. Is Ollama running on ' + apiBase + '?';
				}
			}

			formEl.addEventListener('submit', function(e){
				e.preventDefault();
				var q = (inputEl.value || '').trim();
				if(!q) return;
				inputEl.value = '';
				askOracle(q);
			});
		})();
		</script>